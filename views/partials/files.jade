.file-component.tb
  h3.topic-title {{topic.name}}
  .row-fluid
    tabs
      tab(ng-repeat='type in topic.types', data-tab-id='{{$index}}', caption='{{type}}')
        .row-fluid(ng-show='canWrite')
          .row-fluid
            .span12.pretty-file
              input(type='file', name='form[files][]', data-type='{{type}}', multiple='multiple')
              a.btn.btn-warning(ng-click='triggerFileBrowse(type)') Browse for files
              a.btn.btn-info(ng-show='filesToUpload.length > 0', ng-click='') Upload all
          .row-fluid.row-top-offset
            table.table.table-hover
              tbody
                tr(ng-show='!uploadFile', ng-repeat='file in filesToUpload')
                  td
                    .control-group.input-append
                      input(type='text', ng-model='file.date', data-date-format='dd/mm/yyyy', bs-datepicker)
                      button.btn(type='button', data-toggle='datepicker')
                        i.icon-calendar
                  td
                    .input-prepend
                      span.add-on Display name
                      input(type='text', ng-model='file.displayName')
                  td {{file.name}}
                  // td
                      .pull-right
                        a.btn.btn-danger(ng-click='cancelUpload($index)')
                          i.icon-remove.icon-white
        .row-fluid
          table.table.table-hover
            tbody
              tr(ng-show='canWrite')
                td.span3
                  a.btn.btn-danger(ng-click='deleteType = true')
                    i.icon-trash.icon-white.white
                    | Delete Type
                td
                td
                  .btn-toolbar(ng-show='deleteType')
                    .btn-group.pull-right
                      a.btn.btn-warning(ng-click='deleteType = false')
                        i.icon-ok.icon-white
                      a.btn.btn-danger(ng-click='deleteType = false')
                        i.icon-remove.icon-white
              tr(ng-repeat='(fileId, file) in filter(topic.files, type) | orderBy:"date"')
                td
                  span(ng-show='!canWrite') {{$index + 1}}
                  span(ng-show='canWrite && !editFile && !removeFile') {{file.date | date}}
                  span(ng-show='editFile')
                    .control-group.input-append
                      input(type='text', ng-model='file.date', data-date-format='dd/mm/yyyy', bs-datepicker)
                      button.btn(type='button', data-toggle='datepicker')
                        i.icon-calendar
                  settings(ng-show='removeFile')
                    span.text-error {{file.date | date}}
                td
                  a(ng-show='!editFile && !removeFile', href='topics/{{topic.id}}/{{file.url}}') {{file.name}}
                  settings(ng-show='removeFile')
                    span.text-error {{file.name}}
                  span(ng-show='editFile')
                    input.input-small(type='text', ng-model='file.name')
                td
                  span.btn-toolbar.pull-right
                    .btn-group(ng-show='canWrite && !removeFile && !editFile')
                      a.btn.btn-warning(ng-click='editFile = true')
                        i.icon-pencil.icon-white
                      a.btn.btn-danger(ng-click='removeFile = true')
                        i.icon-trash.icon-white
                  span.pull-right
                    .btn-toolbar(ng-show='removeFile')
                      .btn-group
                        a.btn.btn-warning(ng-click='removeFile = false')
                          i.icon-ok.icon-white
                        a.btn.btn-danger(ng-click='removeFile = false')
                          i.icon-remove.icon-white
                    .btn-toolbar(ng-show='editFile')
                      .btn-group
                        a.btn.btn-warning(ng-click='editFile = false')
                          i.icon-ok.icon-white
                        a.btn.btn-danger(ng-click='editFile = false')
                          i.icon-remove.icon-white
      tab(data-tab-id='timetable', caption='Timetable')
        table.table.table-hover
          tbody
            tr(ng-repeat='date in topic.allFiles | orderBy:"date":reverse')
              td.span3
                {{date.date | date}}
              td
                div(ng-repeat='file in date.files')
                  span {{file.name}}
